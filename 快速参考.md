# 快速参考

## 🚀 启动程序

### 自动启动（推荐）
```bash
# 最简单的方式
双击 start-simple.bat

# 或使用完整版本
双击 start.bat

# 或使用 PowerShell
.\start.ps1
```

### 手动启动（最可靠）
```bash
# 终端 1 - 后端
cd backend
npm run dev

# 终端 2 - 前端
cd frontend
npm run dev
```

### ⚠️ 启动问题？
查看 `故障排除.md` 文档获取详细帮助

## 🌐 访问地址

- **前端**: http://localhost:3000
- **后端 API**: http://localhost:5000/api
- **健康检查**: http://localhost:5000/api/system/health

## 🎯 功能测试

| 功能 | 路径 | 状态 |
|------|------|------|
| 塔罗牌占卜 | /divination/tarot | ✅ 已修复 |
| 星座运势 | /divination/astrology | ✅ 正常 |
| 生辰八字 | /divination/bazi | ✅ 已修复 |
| 周易占卜 | /divination/yijing | ✅ 已修复 |

## 🔧 已修复的问题

### API 数据格式问题
1. **塔罗牌**: spreadType 格式转换（three-card → threeCard）
2. **八字**: birthTime 格式转换（"14:30" → {hour: 14, minute: 30}）
3. **易经**: method 参数值（number → numbers）

### 结果显示问题
4. **所有占卜**: 修复了结果页面数据传递问题
5. **塔罗牌**: 修复了 isReversed 字段名
6. **八字**: 修复了八字四柱显示
7. **星座**: 修复了星座信息显示
8. **易经**: 修复了卦象信息显示

## 📝 测试数据示例

### 塔罗牌
- 问题: "我的未来会怎样？"
- 牌阵: 三张牌阵

### 八字
- 姓名: 张三
- 出生日期: 1990-01-01
- 出生时间: 14:30
- 性别: 男

### 易经
- 问题: "今天运势如何？"
- 方法: 时间起卦 或 数字起卦（123, 456, 789）

### 星座
- 出生日期: 1990-03-21

## ⚠️ 常见问题

### MongoDB 连接失败
```bash
# 启动 MongoDB
net start MongoDB
# 或
mongod
```

### 端口被占用
修改配置文件：
- 后端: `backend/.env` 中的 `PORT`
- 前端: `frontend/.env` 中的 `VITE_API_URL`

### PowerShell 执行策略错误
使用 `start.bat` 或在 CMD 中运行命令

## 📚 相关文档

- `运行指南.md` - 详细的运行说明
- `修复说明.md` - 问题诊断和修复详情
- `test-api.md` - API 测试指南

## 🎨 新增功能（任务8）

### 错误处理
- ✅ 统一的错误响应格式
- ✅ 前端错误边界组件
- ✅ 用户友好的错误提示
- ✅ 系统日志记录

### 系统监控
- ✅ 健康检查 API (`/api/system/health`)
- ✅ 系统指标监控 (`/api/system/metrics`)
- ✅ 网络状态监控
- ✅ 离线提示组件

## 💡 提示

- 首次使用需要注册账户
- 可以不登录使用占卜功能
- 登录后会保存历史记录
- 查看浏览器控制台可以看到详细日志
