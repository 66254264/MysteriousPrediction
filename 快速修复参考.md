# ç½‘ç»œé”™è¯¯ä¿®å¤ - å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### å‰ç«¯ (Frontend)
```typescript
// âœ… è‡ªåŠ¨è¶…æ—¶ï¼ˆ10ç§’ï¼‰
// âœ… è‡ªåŠ¨é‡è¯•ï¼ˆ2æ¬¡ï¼‰
// âœ… ç½‘ç»œç›‘æ§
// âœ… å‹å¥½æç¤º

import { api } from './services/api'

// ä½¿ç”¨ç¤ºä¾‹ - è‡ªåŠ¨å¤„ç†æ‰€æœ‰ç½‘ç»œé—®é¢˜
const result = await api.tarotReading(data)
```

### åç«¯ (Backend)
```typescript
// âœ… è¿æ¥æ± ï¼š50ä¸ªè¿æ¥
// âœ… ç¼“å­˜ï¼š500æ¡è®°å½•
// âœ… å‹ç¼©ï¼šGzip
// âœ… ç›‘æ§ï¼šå®æ—¶æ€§èƒ½

// ç›‘æ§ç«¯ç‚¹
GET /api/system/cache       // ç¼“å­˜ç»Ÿè®¡
GET /api/system/performance // æ€§èƒ½æŒ‡æ ‡
GET /api/system/database    // æ•°æ®åº“çŠ¶æ€
```

## ğŸ”§ é…ç½®å‚æ•°

### å‰ç«¯è¶…æ—¶å’Œé‡è¯•
```typescript
// frontend/src/services/api.ts
const REQUEST_TIMEOUT = 10000  // 10ç§’è¶…æ—¶
const MAX_RETRIES = 2          // æœ€å¤šé‡è¯•2æ¬¡
const RETRY_DELAY = 1000       // é‡è¯•å»¶è¿Ÿ1ç§’
```

### åç«¯è¿æ¥æ± 
```typescript
// backend/src/config/database.ts
maxPoolSize: 50    // æœ€å¤§è¿æ¥æ•°
minPoolSize: 5     // æœ€å°è¿æ¥æ•°
```

### ç¼“å­˜é…ç½®
```typescript
// backend/src/middleware/cache.ts
maxSize: 500              // æœ€å¤§ç¼“å­˜æ¡ç›®
maxMemory: 50 * 1024 * 1024  // 50MBå†…å­˜é™åˆ¶
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|------|--------|--------|------|
| å“åº”æ—¶é—´ | 3-5ç§’ | 1-2ç§’ | â¬‡ï¸ 60% |
| ç¼“å­˜å‘½ä¸­ | <500ms | <500ms | â¬‡ï¸ 90% |
| å¹¶å‘ç”¨æˆ· | ~20 | 100+ | â¬†ï¸ 400% |
| è¶…æ—¶ä¿æŠ¤ | âŒ | âœ… 10ç§’ | âœ… |
| è‡ªåŠ¨é‡è¯• | âŒ | âœ… 2æ¬¡ | âœ… |

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### 1. æµ‹è¯•è¶…æ—¶
```bash
# Chrome DevTools -> Network -> Slow 3G
# å°è¯•å åœï¼Œåº”è¯¥çœ‹åˆ°è‡ªåŠ¨é‡è¯•
```

### 2. æµ‹è¯•ç¦»çº¿
```bash
# Chrome DevTools -> Network -> Offline
# åº”è¯¥çœ‹åˆ°çº¢è‰²æ¨ªå¹…æç¤º
```

### 3. æµ‹è¯•ç¼“å­˜
```bash
# æŸ¥çœ‹å†å²è®°å½•ä¸¤æ¬¡
# ç¬¬äºŒæ¬¡åº”è¯¥æ›´å¿«ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰
# å“åº”å¤´åŒ…å«: X-Cache: HIT
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: è¿˜æ˜¯è¶…æ—¶ï¼Ÿ
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:5000/api/system/health

# 2. å¢åŠ è¶…æ—¶æ—¶é—´
# ä¿®æ”¹ REQUEST_TIMEOUT = 15000
```

### Q: ç¼“å­˜ä¸ç”Ÿæ•ˆï¼Ÿ
```bash
# 1. æ£€æŸ¥ç¼“å­˜ç»Ÿè®¡
curl http://localhost:5000/api/system/cache

# 2. ç¡®ä¿ä½¿ç”¨GETè¯·æ±‚
# åªæœ‰GETè¯·æ±‚ä¼šè¢«ç¼“å­˜
```

### Q: ç¦»çº¿æç¤ºä¸æ˜¾ç¤ºï¼Ÿ
```typescript
// ç¡®ä¿ OfflineIndicator å·²æ·»åŠ åˆ° App.tsx
import { OfflineIndicator } from './components/OfflineIndicator'

function App() {
  return (
    <>
      <OfflineIndicator />
      {/* å…¶ä»–ç»„ä»¶ */}
    </>
  )
}
```

## ğŸ“ ç›¸å…³æ–‡ä»¶

### å‰ç«¯
- `frontend/src/services/api.ts` - APIæœåŠ¡ï¼ˆè¶…æ—¶ã€é‡è¯•ï¼‰
- `frontend/src/utils/errorHandler.ts` - é”™è¯¯å¤„ç†
- `frontend/src/utils/networkStatus.ts` - ç½‘ç»œç›‘æ§
- `frontend/src/components/OfflineIndicator.tsx` - ç¦»çº¿æç¤º

### åç«¯
- `backend/src/config/database.ts` - æ•°æ®åº“é…ç½®
- `backend/src/middleware/cache.ts` - ç¼“å­˜ä¸­é—´ä»¶
- `backend/src/middleware/performance.ts` - æ€§èƒ½ç›‘æ§
- `backend/src/app.ts` - åº”ç”¨é…ç½®

### æ–‡æ¡£
- `NETWORK_ERROR_FIXES.md` - è¯¦ç»†ä¿®å¤è¯´æ˜
- `backend/PERFORMANCE_OPTIMIZATIONS.md` - æ€§èƒ½ä¼˜åŒ–
- `test-network-fixes.md` - æµ‹è¯•æ¸…å•
- `ç½‘ç»œé”™è¯¯ä¿®å¤æ€»ç»“.md` - å®Œæ•´æ€»ç»“

## ğŸ‰ æˆåŠŸæ ‡å¿—

âœ… è¯·æ±‚è‡ªåŠ¨è¶…æ—¶ï¼ˆ10ç§’ï¼‰
âœ… å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼ˆ2æ¬¡ï¼‰
âœ… ç½‘ç»œæ–­å¼€æœ‰æç¤º
âœ… é”™è¯¯æ¶ˆæ¯å‹å¥½
âœ… å“åº”æ—¶é—´<5ç§’
âœ… æ”¯æŒ100+å¹¶å‘
âœ… ç¼“å­˜å‘½ä¸­ç‡>50%

## ğŸ’¡ æç¤º

1. **å¼€å‘æ—¶**ï¼šæ‰“å¼€Chrome DevToolsæŸ¥çœ‹ç½‘ç»œçŠ¶æ€
2. **æµ‹è¯•æ—¶**ï¼šä½¿ç”¨ç½‘ç»œé™é€Ÿæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ
3. **ç›‘æ§æ—¶**ï¼šå®šæœŸæ£€æŸ¥ `/api/system/*` ç«¯ç‚¹
4. **ä¼˜åŒ–æ—¶**ï¼šæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´é…ç½®å‚æ•°

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š`NETWORK_ERROR_FIXES.md`
